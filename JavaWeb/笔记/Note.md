# Servlet

## 关于系统架构

1. 系统架构包括什么形式？
   - C/S结构
   - B/S结构
2. C/S架构？
   - Client / Server（客户端 / 服务器）
   - C/S结构的软件或者说系统有哪些呢？
     - QQ（需要在官网下载软件，登录账号，才能和好友聊天）
     - 特点：需要安装特定的客户端软件
   - C/S架构的系统优点和缺点分别是什么？
     - 优点：
       - 速度快（软件中的数据大部分都是集成到客户端软件中，很少量数据从给服务器传过来）
       - 体验好
       - 界面酷炫
       - 服务器压力小（大量数据都是集成在客户端软件中，服务器只需要传递很少数据）
       - 安全（主要是因为大量数据都集成到客户端中，客户端有很多个，服务器虽然只有一个，即使服务器挂了，问题也不大，因为大量的数据在多个客户端上有缓存数据）
       - ......
     - 缺点：
       - 升级维护比较差劲。（升级维护麻烦，成本比较高每个客户端都需要升级，有些软件不容易安装）
3. B/S架构？
   - B/S（Browser / Server，浏览器 / 服务器）
   - https://www.baidu.com
   - https://www.bilibili.com
   - B/S结构的系统是不是一个特殊的C/S系统？
     - 还是一个C/S，只不过这个C比较特殊，是一个固定的”浏览器“
   - B/S结构的系统优点和缺点：
     - 优点：
       - 升级维护方便，成本比较低（只需要升级服务器端即可）
       - 不需要安装特定的客户端软件，用户操作极其方便。只需要打开浏览器，输入网址即可
     - 缺点：
       - 速度慢（不是因为带宽低，是因为所有的数据都是在服务器上，用户发送的每个请求都要经过服务器响应数据，所以B/S结构的系统在网络中传送的数据量大）
       - 体验差（浏览器只支持前端三件套这三种语言，界面不酷炫）
       - 不安全（所有数据都在服务器啊很难过，服务器挂了就没了）
       - ......
4. C/S和B/S结构的系统，哪个好？哪个不好？
   - 这个问题没水平，不同架构的系统在不同业务场景不同
   - 娱乐性软件建议使用：
     - C/S架构
   - 公司内部的一些业务软件建议使用？
     - 公司内部使用的系统，需要维护成本低
     - 公司内部使用的系统，不需要很酷炫
     - 公司内部使用的系统，主要是能够进行数据的维护即可
     - B/S架构
5. 注意：开发B/S结构的系统，其实就是开发网站，就是一个WEB系统
   - 开发一个WEB系统需要会什么技术？
     - WEB前端
       - HTML
       - CSS
       - JavaScript
     - WEB后端
       - Java
       - C语言
       - C++
       - python
       - PHP
       - ......
6. JavaEE是什么？
   - Java包括三大块：
     - JavaSE
       - Java标准版，别人写好的一套类库，基础！
     - JavaEE
       - Java企业版，也是一套类库，只不过这套类库可以帮助我们完成企业级开发
       - 别人写好的，可以开发企业及项目
       - 可以开发web系统
     - JavaME
       - Java微型版，还是一套类库，只不过进行电子卫星设备内部开发
       - 机顶盒内核程序，电冰箱内核程序...
   - JavaEE实际上包括很多种规范：13种，Servlet就是JavaEE规范之一

## B/S架构的通信原理

- WEB系统的访问流程
  - 第一步，打开浏览器
  - 第二步：找到地址栏
  - 第三步：输入一个合法的网址
  - 第四步：回车
  - 第五步：在浏览器上展示相应结果
- 关于域名：
  - https://ww.baidu.com 网址
  - www.baidu.com 是一个域名
  - 在浏览器地址栏输入域名，回车后，域名解析器会解析出对应的iip地址和端口号
- ip地址是啥？
  - 计算机在网络当中的一个身份证号，在同一个网络当中，ip地址是唯一的
  - A计算机要想和B计算机通信，首先就得知道B计算机的ip地址，有了ip地址才能进行通信
- 端口号是啥？
  - 一个端口代表一个软件（一个端口代表一个应用或者服务）
  - 一个计算机当中有很多端口，每个软件启动之后都有一个端口号
  - 在同一个计算机上，端口号具有唯一性
- 一个WEB系统的通信原理，通信步骤：
  - 第一步：输入网址（URL）
  - 第二步：域名解析器进行解析 http://110.242.68.3:80/index.html
  - 第三步：浏览器软件在网络中搜索110.242.68.3这一台主机 ，知道找到这台主机
  - 第四步：定位这个ip，这台主机上的服务器软件，通过端口号可以很轻松的定位
  - 第五步：80端口对应的服务器软件得知浏览器想要的资源名：index.html
  - 第六步：服务器软件找到该资源文件，并将该资源文件直接输入响应到浏览器中
  - 第七步：浏览器接收到来自服务器的代码
  - 第八步：浏览器执行代码，进行渲染
- 什么是URL？
  - 统一资源定位符
- 什么是请求，什么是响应？
  - 请求和响应实际上说的是数据的流向不同
  - 从Browser端发送数据到Server端，称为请求，request  
  - 从Server端向Browser发送数据，称为响应，response

## 关于WEB服务器软件

- WEB服务器软件都有哪些呢（都是提前开发好的）？
  - Tomcat（WEB服务器）
  - Jetty（WEB服务器）
  - JBOSS（应用服务器）
  - WebLogic（应用服务器）
  - WebSphere（应用服务器）
- 应用服务器和WEB服务器的关系？
  - 应用服务器实现了JavaEE的所有规范
  - WEB服务器只实现了JavaEE的Servlet + JSP两个核心规范
  - 应用服务器是包含WEB服务器的
- Tomcat下载
  - 官网：https://tomcat.apache.org/download-10.cgi
  - tomcat开源、免费、轻量级WEB服务器
  - tomcat还有另外一个名字：catalina
  - Logo是一只公猫（寓意表示Tomcat服务器是轻巧的。体积小、运行速度快）
  - tomcat是Java编写的
  - tomcat服务器想要运行，就必须要有Java环境（jre：Java运行时环境）
- Tomcat服务器想要运行，需要现有jre，所以要先安装JDK，配置Java环境
  - JAVA_HOME: 安装目录
  - PATH：%JAVA_HOME%\bin

- Tomcat服务器安装
  - zip包下载解压即可。
  - 启动，进入`bin`目录，`startup.bat`启动
    - xxx.bat文件是个什么文件，Windows系统专用，bat文件时批处理文件，可以编写大量的Dos命令，执行bat文件就相当于批量执行Dos命令
    - Startup.sh，这个在Windows中无法执行，在Linux环境中可以执行，大量执行shell命令
    - tomcat服务器提供了bat和sh，环境通用
    - 分析startup.bat文件，执行这个文件，实际上是执行 catalina.bat 文件
    - catalina.bat文件中有这样一行配置：MAINCLASS=.....（这就是main方法所在的类）
  - 启动tomcat服务器需要配置两个环境变量：
    - `JAVA_HOME`：jdk的根
    - `CATALINA_HOME`：tomcat的根
- 关于tomcat服务器的目录
  - bin：tomcat的命令目录，比如：启动、关闭tomcat
  - conf：配置文件的目录，如server.xml可以修改端口号
  - lib：tomcat服务器的核心程序目录，因为是Java语言编写，这里面jar包都是class文件
  - logs：tomcat服务器的日志记录
  - temp：tomcat服务器的临时目录
  - webapps：这个目录就是用来存放大量的webapp（web application）
  - work：存放JSP文件翻译之后的Java文件以及编译之后的class文件

## 实现一个最基本的web应用

- 第一步：找到 `CATALINA_HOME\webapps`目录
  - 因为所有的webapp都要放到webapps目录下，放到这个下面，Tomcat服务器才找得到
- 第二步：在 `CATALINA_HOME\webapps`目录下新建一个子目录，名为oa
  - 这个 oa 就是webapp的名字
- 第三步：在 oa 目录下新建资源文件，例如：index.html
  - 编写 index.html 的内容
- 第四步：启动tomcat服务器
- 第五步：打开浏览器 `http://127.0.0.1:8080/oa/index.html`
- 思考问题：
  - 我们在浏览器上直接输入一个URL，然后回车。这个动作和超链接一样吗？一样的
- 访问这些地址，访问的都是静态资源，写死在页面上的
- 连接数据库需要`JDBC`程序，也就是说需要编写Java程序连接数据库，数据库中有多少条记录，页面上就显示多少条记录，这种技术被称为动态网页技术。(动态网页技术并不是说页面中有flash动画。动态网页技术是说页面中的数据是动态的，根据数据库中数据的变化而变化。)

## 对于一个动态的web应用来说，一个请求和响应的过程，多少角色参与？角色之间有多少个协议？

- 有哪些角色（在整个BS结构的系统当中，有哪些人参与进去了）
  - 浏览器的开发团队
  - Web Server的开发团队
  - DB Server的开发团队
  - webapp的开发团队
- 角色和角色之间需要遵守哪些规范，哪些协议
  - webapp的开发团队 和 WebServer的开发团队之间有一套规范：JavaEE规范之一和Servlet规范
  - Servlet规范的作用是什么？
    - Web Server和webapp解耦合
  - Browser 和 WebServer之间有一套传输协议：HTTP协议（超文本传输协议）
  - webapp开发团队和DBServer开发团队之间有一套规范：JDBC规范
